{"ast":null,"code":"var _jsxFileName = \"/Users/bagjuhong/Desktop/ian/client/src/web/components/contentsComponents/MakePictures.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MakePictures() {\n  _s();\n\n  const [imgBase64, setImgBase64] = useState([]); // 파일 base64\n\n  const [imgFile, setImgFile] = useState(null); //파일\n\n  useEffect(() => {\n    {\n      console.log('imgBase64 : ', imgBase64);\n    }\n  }, [imgBase64]);\n\n  const handleChangeFile = event => {\n    setImgFile(event.target.files);\n    setImgBase64([]);\n\n    for (let i = 0; i < event.target.files.length; i++) {\n      if (event.target.files[i]) {\n        let reader = new FileReader();\n        reader.readAsDataURL(event.target.files[i]);\n\n        reader.onload = () => {\n          const base64 = reader.result; // console.log('reader.result : ', reader.result);\n\n          if (base64) {\n            let base64Sub = base64.toString(); // console.log('base64.toString(); : ', base64.toString());\n\n            setImgBase64(imgBase64 => [...imgBase64, base64Sub]);\n          }\n        };\n      }\n    }\n  };\n\n  const onImgChange = async event => {\n    const formData = new FormData();\n    formData.append('file', event.target.files[0]); // const response = await axios.post('http://localhost:3001/uploadfile', formData);\n\n    const response = await axios.post('http://localhost:3001/uploadfile', {\n      data: JSON.stringify(formData)\n    });\n    console.log('response : ', response);\n  };\n\n  const WriteBoard = async () => {\n    const fd = new FormData(); // Object.values(imgFile).forEach((file) => {\n    //     console.log('imgFile : ', file);\n    //     fd.append(\"test\", 'test')\n    // });\n\n    fd.append('file', imgBase64[0]);\n    console.log('fd', fd); // fd.append(\"comment\", \"이건 테스트라구요 아셨나요?\");\n\n    await axios.post('http://localhost:3001/uploadfile', fd, {\n      headers: {\n        \"Content-Type\": `multipart/form-data; `\n      }\n    }).then(response => {\n      if (response.data) {\n        console.log('response.data : ', response.data);\n      }\n    }).catch(error => {\n      console.log('error : ', error);\n    }); // const result = await axios({\n    //     method: 'POST',\n    //     url: 'http://localhost:3001/uploadfile',\n    //     // headers: { \"Content-Type\": `multipart/form-data`},\n    //     data: {\n    //         test: fd\n    //     }\n    // })\n    // console.log('result : ', result);\n  };\n  /*\n      reader.result 는 파일을 비트맵 데이터를 리턴해준다.\n       해당 데이터를 통해서 파일 미리보기가 가능하다.\n      비트맵 데이터를 저장 가능하도록 스트링으로 바꾼다.  \n      var base64Sub = base64.toString()\n      해당 데이터를 imgBase64 스테이트에 저장하는데 파일이 하나가 아니라 배열이므로 배열에 붙여줘야한다.\n      setImgBase64(imgBase64 => [...imgBase64, base64Sub]);\n      \n      위와 같이 적으면 기존 imgBase64 배열에 base64Sub 값을 붙인 새로운 배열을 스테이트에 저장한다.\n  */\n\n\n  function zerocho(event) {\n    console.log(event.target.files);\n    const xhr = new XMLHttpRequest();\n    const fd = new FormData();\n    fd.append('img', event.target.files[0]);\n\n    xhr.onload = function () {\n      if (xhr.status === 200 || xhr.status === 201) {\n        console.log(xhr.responseText);\n      } else {\n        console.error(xhr.responseText);\n      }\n    };\n\n    xhr.open('POST', 'http://localhost:3001/uploadfile');\n    xhr.send(fd);\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(\"input\", {\n      type: \"file\",\n      id: \"file\",\n      onChange: zerocho,\n      multiple: \"multiple\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 113,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n      onClick: WriteBoard,\n      style: {\n        border: '2px solid black',\n        width: '700px',\n        fontSize: '40px'\n      },\n      children: \"\\uC791\\uC131\\uC644\\uB8CC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 114,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 112,\n    columnNumber: 9\n  }, this);\n}\n\n_s(MakePictures, \"vl/8mjUXY24XehJsaCqtHDnI5Oo=\");\n\n_c = MakePictures;\nexport default MakePictures;\n\nvar _c;\n\n$RefreshReg$(_c, \"MakePictures\");","map":{"version":3,"sources":["/Users/bagjuhong/Desktop/ian/client/src/web/components/contentsComponents/MakePictures.jsx"],"names":["React","useState","useEffect","axios","MakePictures","imgBase64","setImgBase64","imgFile","setImgFile","console","log","handleChangeFile","event","target","files","i","length","reader","FileReader","readAsDataURL","onload","base64","result","base64Sub","toString","onImgChange","formData","FormData","append","response","post","data","JSON","stringify","WriteBoard","fd","headers","then","catch","error","zerocho","xhr","XMLHttpRequest","status","responseText","open","send","border","width","fontSize"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\n\n\nfunction MakePictures() {\n    const [imgBase64, setImgBase64] = useState([]); // 파일 base64\n    const [imgFile, setImgFile] = useState(null);\t//파일\n\n\n    useEffect(()=>{\n        {console.log('imgBase64 : ', imgBase64)}\n    }, [imgBase64])\n\n    const handleChangeFile = (event) => {\n        setImgFile(event.target.files);\n        setImgBase64([]);\n        for (let i = 0; i < event.target.files.length; i++) {\n            if (event.target.files[i]) {\n                let reader = new FileReader();\n                reader.readAsDataURL(event.target.files[i]);\n\n                reader.onload = () => {\n                    const base64 = reader.result;\n                    // console.log('reader.result : ', reader.result);\n                    if (base64) {\n                        let base64Sub = base64.toString();\n                        // console.log('base64.toString(); : ', base64.toString());\n                        setImgBase64(imgBase64 => [...imgBase64, base64Sub]);\n                    }\n                }\n            }\n        }\n    }\n\n    const onImgChange = async (event) => {\n        const formData = new FormData();\n        formData.append('file', event.target.files[0]);\n        // const response = await axios.post('http://localhost:3001/uploadfile', formData);\n        const response = await axios.post('http://localhost:3001/uploadfile', { data: JSON.stringify(formData) });\n        console.log('response : ', response);\n    }\n\n    const WriteBoard = async() => {\n        const fd = new FormData();\n\n        // Object.values(imgFile).forEach((file) => {\n        //     console.log('imgFile : ', file);\n        //     fd.append(\"test\", 'test')\n        // });\n        fd.append('file', imgBase64[0])\n        console.log('fd',fd);\n\n        // fd.append(\"comment\", \"이건 테스트라구요 아셨나요?\");\n\n        await axios.post('http://localhost:3001/uploadfile', fd, {\n            headers: {\n              \"Content-Type\": `multipart/form-data; `,\n            }\n          })\n        .then((response) => {\n            if(response.data){\n                console.log('response.data : ', response.data)\n            }\n        })\n        .catch((error) => {\n            console.log('error : ', error)\n        })\n\n        // const result = await axios({\n        //     method: 'POST',\n        //     url: 'http://localhost:3001/uploadfile',\n        //     // headers: { \"Content-Type\": `multipart/form-data`},\n        //     data: {\n        //         test: fd\n        //     }\n        // })\n        // console.log('result : ', result);\n    }\n\n    /*\n        reader.result 는 파일을 비트맵 데이터를 리턴해준다.\n\n        해당 데이터를 통해서 파일 미리보기가 가능하다.\n        비트맵 데이터를 저장 가능하도록 스트링으로 바꾼다.  \n        var base64Sub = base64.toString()\n        해당 데이터를 imgBase64 스테이트에 저장하는데 파일이 하나가 아니라 배열이므로 배열에 붙여줘야한다.\n        setImgBase64(imgBase64 => [...imgBase64, base64Sub]);\n        \n        위와 같이 적으면 기존 imgBase64 배열에 base64Sub 값을 붙인 새로운 배열을 스테이트에 저장한다.\n    */\n\n    function zerocho(event){\n        console.log(event.target.files);\n\n        const xhr = new XMLHttpRequest();\n        const fd = new FormData();\n\n        fd.append('img', event.target.files[0]);\n\n        xhr.onload = function(){\n            if(xhr.status === 200 || xhr.status === 201){\n                console.log(xhr.responseText);\n            }else{\n                console.error(xhr.responseText);\n            }\n        }\n        xhr.open('POST', 'http://localhost:3001/uploadfile')\n        xhr.send(fd);\n    }\n\n    return (\n        <div>\n            <input type=\"file\" id=\"file\" onChange={zerocho} multiple=\"multiple\" />\n            <button \n                onClick={WriteBoard}\n                style={{ \n                    border: '2px solid black',\n                    width: '700px',\n                    fontSize: '40px'    \n                }}\n            >작성완료</button>\n            {/* {imgBase64.map((item) => {\n                return (\n\n                    <img\n                        className=\"d-block w-100\"\n                        src={item}\n                        alt=\"First slide\"\n                        style={{ width: \"100%\", height: \"550px\" }}\n                    />\n\n                )\n            })} */}\n               \n                {/* 이렇게 해도 되네.. imgBase64[0]번째가 비트맵을 다 가지고 있나..? \n                    imgBase64 :  ['data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAACsAA…CBAgQIECAAAECBDqwwP8DbEbzzpAKhGgAAAAASUVORK5CYII=']\n                    이런식으로 하나만 가지고 있음\n                */}\n        </div>\n    )\n}\n\nexport default MakePictures\n"]},"metadata":{},"sourceType":"module"}